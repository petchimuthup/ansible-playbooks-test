---
 - name: users ssh session history
   hosts: linux
   tasks:

    - name: create history directory
      file:
        path: /var/log/history
        state: directory
        mode: 0777

    
    - name: history with date & time format
      blockinfile:
        backup: yes
        dest: /etc/profile
        marker: "# {mark} ANSIBLE HISTTIMEFORMAT BLOCK"
        state: present
        block: |
          export HISTTIMEFORMAT="%d/%m/%y %T "
          export HISTFILE="/var/log/history/$USER"
            
    - name: Increase HISTSIZE
      lineinfile:
        path: /etc/profile
        regex: '^HISTSIZE'
        line: 'HISTSIZE=2000'
    
#    - name: source /etc/profile execute on root user
#      lineinfile:
#        path: /root/.bash_profile
#        backup: yes
#        line: 'source /etc/profile'
    
#    - name: source /etc/profile execute on local & AD users
#      lineinfile:
#        path: /home/*/.bash_profile
#        backup: yes
#        line: 'source /ect/profile'





        
        

      

...      
