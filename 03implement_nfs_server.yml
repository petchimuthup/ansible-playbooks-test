---
 - name: Implement NFS Server on Singapore DC
   hosts: ansmgdnode01
   tasks:
    
    - name: install nfs software
      yum:
        name: nfs-utils
        state: latest

    - name: start and enable service
      service:
        name: nfs-server
        state: started
        enabled: yes

    - name: create a share directory
      file:
        path: /share1
        state: directory

    - name: edit configuration
      lineinfile:
        path: /etc/exports
        line: '/share1  ansmgdnode02(ro)'
        state: present

    - name: update
      shell:
        cmd: exportfs -r

 - name: Implement NFS Client
   hosts: ansmgdnode02
   tasks:


    - name: install pkg
      yum:
        name: nfs-utils
        state: present
    
    - name: Mount NFS Share
      mount:
        path: /local1
        src: ansmgdnode01:/share1
        fstype: nfs
        state: mounted
